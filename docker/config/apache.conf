<VirtualHost *:80>
    ServerName localhost
    DocumentRoot /var/www/html

    <Directory /var/www/html>
        # Seguir enlaces simbólicos y desactivar listado de directorios
        Options +FollowSymLinks -Indexes
        AllowOverride All
        Require all granted

        # Asegurar que Apache utiliza index.php como por defecto
        <IfModule mod_dir.c>
            DirectoryIndex index.php index.html
        </IfModule>

        # Configuración específica para directorios: no sobreescribir si existe archivo/directorio
        <IfModule mod_rewrite.c>
            RewriteEngine On
            RewriteCond %{REQUEST_FILENAME} -f [OR]
            RewriteCond %{REQUEST_FILENAME} -d
            RewriteRule ^ - [L]
        </IfModule>
    </Directory>

    # Configuración para subdirectorios de tareas
    <Directory /var/www/html/T*/public>
        Options +FollowSymLinks
        AllowOverride All
        Require all granted
    </Directory>

    ErrorLog ${APACHE_LOG_DIR}/error.log
    CustomLog ${APACHE_LOG_DIR}/access.log combined
</VirtualHost>